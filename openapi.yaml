openapi: 3.1.0
servers:
  - url: http://localhost:8080
    description: 開発環境
info:
  title: 基本情報編集API
  version: 1.0.0
  description: ユーザーの基本情報を編集するためのAPI
paths:
  /api/profile/basic-info:
    get:
      summary: 基本情報を取得する
      description: 現在登録されているユーザーの基本情報を返します。
      responses:
        '200':
          description: 取得成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicInfo'
        '500':
          description: サーバーエラー
    put:
      summary: 基本情報を更新する
      description: 学籍番号や名前、自己紹介などの基本情報を編集します。
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BasicInfo'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateResponse'
        '400':
          description: バリデーションエラー
        '500':
          description: サーバーエラー

components:
  schemas:
    BasicInfo:
      type: object
      required:
        - student_id
        - faculty
        - last_name
        - first_name
        - nickname
        - self_introduction
        - visibility
      properties:
        student_id:
          type: string
          example: B1234567
        faculty:
          type: string
          example: 情報工学部
        last_name:
          type: string
          example: 田中
        first_name:
          type: string
          example: 太郎
        nickname:
          type: string
          example: たなたろ
        self_introduction:
          type: string
          description: Markdown形式の自己紹介文
          example: |
            # 自己紹介

            プログラミングが好きな2年生です！

            ## 興味のある分野
            - **Webアプリ開発**
            - **機械学習**
        visibility:
          $ref: '#/components/schemas/Visibility'
    Visibility:
      type: object
      required:
        - name
        - self_introduction
        - x
        - instagram
      properties:
        name:
          type: boolean
          example: false
        self_introduction:
          type: boolean
          example: true
        x:
          type: boolean
          example: false
        instagram:
          type: boolean
          example: true
    UpdateResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
          example: 基本情報を更新しました。
